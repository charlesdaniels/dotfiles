#!/usr/bin/env bash

# .SCRIPTDOC

# Use rofi to take a screenshot of either the whole screen or a region.

# .ENDOC

choice="$(echo -e "region\nfull" | rofi -dmenu)"


out_dir="$HOME/Desktop"

out_file="$out_dir/_screenshot $(date +"%Y-%m-%d at %H_%M_%S").png"

if [ "$choice" == "region" ] ; then
	if ! out="$(scrot --select --silent "$out_file" 2>&1)" ; then
		rofi -e "screenshot error: $out"
		exit 1
	fi
elif [ "$choice" == "full" ] ; then
	if ! out="$(scrot --silent --count --delay 1 "$out_file" 2>&1)" ; then
		rofi -e "screenshot error: $out"
		exit 1
	fi
else
	rofi -e "Invalid choice: $choice"
	exit 1
fi

notify-send "Created screenshot $out_file."
