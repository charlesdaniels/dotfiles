# symlink zsh abbreviated path into the right place

if [ "$PROVISION_HAVE_ROOT" = "NO" ] ; then
	# we only want to do a non-privileged install

	printf "INFO: installing zsh abbr path..."

	if [ ! -d "$HOME/.zsh" ] ; then
		mkdir -p  "$HOME/.zsh"
	fi

	if [ ! -d "$HOME/.zsh" ] ; then
		echo " FAIL"
		echo "PANIC: $HOME/.zsh does not exist and could not be created"
		exit 1
	fi

	if [ ! -e "$THIRDPARTY_DIR/zsh-abbr-path/.abbr_pwd" ] ; then
		echo " FAIL"
		echo "PANIC: '$THIRDPARTY_DIR/zsh-abbr-path/.abbr_pwd' does not exist, did you remember to use git clone --recursive?"
		exit 1
	fi

	rm -f "$HOME/.zsh/abbr_pwd.zsh"
	ln -s "$THIRDPARTY_DIR/zsh-abbr-path/.abbr_pwd" "$HOME/.zsh/abbr_pwd.zsh"

	echo " DONE"
fi
